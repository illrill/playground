name: workload
on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  validate:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment:
          - use2-npr
          - euwe-npr
    environment: ${{ matrix.environment }}
    steps:
      - uses: actions/checkout@v4
      - run: echo ${{ matrix.environment }}
      - run: echo ${{ vars.K8S_CLUSTER }}
  deploy:
    needs: validate
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment:
          - use2-npr
          - euwe-npr
    environment: ${{ matrix.environment }}
    steps:
      - uses: actions/checkout@v4
      - run: echo ${{ matrix.environment }}
      - run: echo ${{ vars.K8S_CLUSTER }}
  verify:
    needs: deploy
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment:
          - use2-npr
          - euwe-npr
    environment: ${{ matrix.environment }}
    steps:
      - uses: actions/checkout@v4
      - run: echo ${{ matrix.environment }}
      - run: echo ${{ vars.K8S_CLUSTER }}
